<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Formulario de Prueba</title>
</head>
<body>
  <h2>Introduce tu código postal</h2>
  <form id="formulario" action="https://script.google.com/macros/s/AKfycby6LTc6Po6qin1uxBq3IAIr-UQGn3gd4Cx6qeACCrMuX_0H6nUiB50EHdMM8bl7wnhSbw/exec" method="POST">
    <input
      type="number"
      id="codigoPostal"
      name="codigoPostal"
      placeholder="Código Postal"
      required
      min="1000"
      max="99999"
      style="padding: 10px; font-size: 18px; width: 250px;"
      oninput="if(this.value.length > 5) this.value = this.value.slice(0,5);"
    />
    <br><br>
    <button type="submit">Enviar</button>
  </form>

  <script>
    document.getElementById("formulario").addEventListener("submit", function(e) {
      e.preventDefault();
      const form = e.target;
      fetch(form.action, {
        method: 'POST',
        body: new FormData(form)
      }).then(response => {
        if (response.ok) {
          alert("Código postal guardado correctamente.");
        } else {
          alert("Error al enviar el formulario.");
        }
      }).catch(error => {
        alert("Error de red.");
        console.error(error);
      });
    });
  </script>
</body>
</html>
